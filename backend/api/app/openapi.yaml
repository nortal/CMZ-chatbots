openapi: 3.0.3
info:
  description: API for the Cougar Mountain Zoo digital ambassador platform
  title: CMZ API
  version: 1.0.2
servers:
- description: Production
  url: https://api.cmz.example.com
- description: Staging
  url: https://staging.api.cmz.example.com
tags:
- name: UI
- name: Auth
- name: Users
- name: Conversation
- name: Animals
- name: Knowledge
- name: Analytics
- name: Admin
- name: System
- name: Media
- description: Backlog endpoints (not in v1)
  name: Later
paths:
  /:
    get:
      responses:
        "200":
          content:
            application/json:
              example:
                message: Welcome to CMZ API
                status: ok
              schema:
                $ref: "#/components/schemas/PublicHome"
          description: Health/info banner
      summary: Public homepage
      tags:
      - UI
  /admin:
    get:
      responses:
        "200":
          content:
            application/json:
              example:
                widgets:
                - activeUsers
                - latency
                - errors
              schema:
                $ref: "#/components/schemas/AdminShell"
          description: Admin shell data/widgets
      security:
      - bearerAuth: []
      summary: Admin dashboard shell data
      tags:
      - UI
  /member:
    get:
      responses:
        "200":
          content:
            application/json:
              example:
                preferences: {}
                alerts: []
              schema:
                $ref: "#/components/schemas/MemberShell"
          description: Portal shell data/widgets
      security:
      - bearerAuth: []
      summary: User portal shell data
      tags:
      - UI
  /auth:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AuthRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              example:
                token: eyJhbGciOi...
                expiresIn: 3600
                user:
                  id: user_1
                  email: user1@cmz.org
                  displayName: User 1
                  role: admin
                  created:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  modified:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  softDelete: false
              schema:
                $ref: "#/components/schemas/AuthResponse"
          description: Auth token
        "401":
          $ref: "#/components/responses/Unauthorized"
      summary: Login or register
      tags:
      - Auth
  /auth/refresh:
    post:
      responses:
        "200":
          content:
            application/json:
              example:
                token: eyJhbGciOi...
                expiresIn: 3600
                user:
                  id: user_1
                  email: user1@cmz.org
                  displayName: User 1
                  role: admin
                  created:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  modified:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  softDelete: false
              schema:
                $ref: "#/components/schemas/AuthResponse"
          description: New token
      summary: Refresh access token
      tags:
      - Auth
  /auth/logout:
    post:
      responses:
        "204":
          description: Logged out
      security:
      - bearerAuth: []
      summary: Logout current user (invalidate token/session)
      tags:
      - Auth
  /auth/reset_password:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PasswordResetRequest"
        required: true
      responses:
        "204":
          description: Email sent if account exists
      summary: Initiate password reset
      tags:
      - Auth
  /me:
    get:
      responses:
        "200":
          content:
            application/json:
              example:
                id: user_2
                email: user2@cmz.org
                displayName: User 2
                role: member
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/User"
          description: User profile
      security:
      - bearerAuth: []
      summary: Current authenticated user
      tags:
      - Users
  /userlist:
    get:
      parameters:
      - explode: true
        in: query
        name: details
        required: false
        schema:
          default: false
          type: boolean
        style: form
      - explode: true
        in: query
        name: role
        required: false
        schema:
          enum:
          - visitor
          - member
          - editor
          - admin
          type: string
        style: form
      - explode: true
        in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          type: integer
        style: form
      - explode: true
        in: query
        name: pageSize
        required: false
        schema:
          default: 50
          maximum: 200
          minimum: 1
          type: integer
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                items:
                - id: user_1
                  email: user1@cmz.org
                  displayName: User 1
                  role: admin
                  created:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  modified:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  softDelete: false
                - id: user_2
                  email: user2@cmz.org
                  displayName: User 2
                  role: member
                  created:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  modified:
                    at: 2025-08-11T09:00:00Z
                    by:
                      id: user_1
                      email: system@cmz.org
                      displayName: System
                  softDelete: false
                page: 1
                pageSize: 50
                total: 2
              schema:
                $ref: "#/components/schemas/PagedUsers"
          description: Paged user list
      security:
      - bearerAuth: []
      summary: List users
      tags:
      - Admin
  /userdetails:
    get:
      parameters:
      - explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                id: user_2
                email: user2@cmz.org
                displayName: User 2
                role: member
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
                usage:
                  userid: user_2
                  totalSessions: 5
                  totalTurns: 42
                  lastActive: 2025-08-11T09:00:00Z
              schema:
                $ref: "#/components/schemas/UserDetails"
          description: User details
        "404":
          $ref: "#/components/responses/NotFound"
      security:
      - bearerAuth: []
      summary: Fetch specific user details
      tags:
      - Admin
  /userrole:
    patch:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/_userrole_patch_request"
        required: true
      responses:
        "200":
          content:
            application/json:
              example:
                id: user_2
                email: user2@cmz.org
                displayName: User 2
                role: editor
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/User"
          description: Updated user
      security:
      - bearerAuth: []
      summary: Change user role
      tags:
      - Admin
  /user:
    delete:
      parameters:
      - explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "204":
          description: Deleted
        "404":
          $ref: "#/components/responses/NotFound"
      security:
      - bearerAuth: []
      summary: Delete user
      tags:
      - Admin
  /convo_turn:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ConvoTurnRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              example:
                reply: Hi there! I'm Pokey. Want to hear a porcupine fact?
                turn:
                  id: turn_001
                  timestamp: 2025-08-11T09:00:00Z
                  tokensPrompt: 120
                  tokensCompletion: 35
                  latencyMs: 420
              schema:
                $ref: "#/components/schemas/ConvoTurnResponse"
          description: AI response and turn metadata
      security:
      - bearerAuth: []
      summary: Send a conversation turn and get AI reply
      tags:
      - Conversation
  /convo_history:
    delete:
      parameters:
      - description: Conversation/session id
        explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "204":
          description: Deleted
        "404":
          $ref: "#/components/responses/NotFound"
      security:
      - bearerAuth: []
      summary: Delete conversation history (GDPR) (backlog)
      tags:
      - Conversation
      - Later
      x-phase: later
    get:
      parameters:
      - explode: true
        in: query
        name: animalid
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: userid
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: limit
        required: false
        schema:
          default: 100
          maximum: 500
          minimum: 1
          type: integer
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                sessionId: sess_123
                animalid: animal_1
                userid: user_2
                turns:
                - role: user
                  content: Hi Pokey
                  timestamp: 2025-08-11T09:00:00Z
                - role: assistant
                  content: Hello!
                  timestamp: 2025-08-11T09:00:00Z
              schema:
                $ref: "#/components/schemas/ConvoHistory"
          description: Conversation turns
      security:
      - bearerAuth: []
      summary: Get conversation history (backlog)
      tags:
      - Conversation
      - Later
      x-phase: later
  /summarize_convo:
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SummarizeRequest"
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Summary"
          description: Summary created
      security:
      - bearerAuth: []
      summary: Summarize conversation for personalization/cost control (backlog)
      tags:
      - Conversation
      - Later
      x-phase: later
  /animal_list:
    get:
      responses:
        "200":
          content:
            application/json:
              example:
              - id: animal_1
                name: Pokey
                species: Coendou prehensilis
                status: active
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              - id: animal_2
                name: Animal 2
                species: Speciesus exampleus
                status: hidden
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                items:
                  $ref: "#/components/schemas/Animal"
                type: array
          description: List of animals
      summary: List animals
      tags:
      - Animals
  /animal_details:
    get:
      parameters:
      - explode: true
        in: query
        name: animalid
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                id: animal_1
                name: Pokey
                species: Coendou prehensilis
                status: active
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
                description: A friendly prehensile-tailed porcupine ambassador.
                habitat: Tropical forests
                imageUrl: https://example.com/pokey.jpg
              schema:
                $ref: "#/components/schemas/AnimalDetails"
          description: Animal details
        "404":
          $ref: "#/components/responses/NotFound"
      summary: Fetch animal details
      tags:
      - Animals
  /animal_config:
    get:
      parameters:
      - explode: true
        in: query
        name: animalid
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                voice: pokey_v1
                personality: goofy-friendly
                aiModel: gpt-5o-mini
                temperature: 0.7
                topP: 1
                toolsEnabled:
                - facts
                - media_lookup
                guardrails:
                  safe_mode: true
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/AnimalConfig"
          description: Animal config
      summary: Get animal configuration
      tags:
      - Animals
    patch:
      parameters:
      - explode: true
        in: query
        name: animalid
        required: true
        schema:
          type: string
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AnimalConfigUpdate"
        required: true
      responses:
        "200":
          content:
            application/json:
              example:
                voice: pokey_v1
                personality: goofy-friendly
                aiModel: gpt-5o-mini
                temperature: 0.7
                topP: 1
                toolsEnabled:
                - facts
                - media_lookup
                guardrails:
                  safe_mode: true
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema: {}
          description: Updated config
        "400":
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
          description: Invalid config
      security:
      - bearerAuth: []
      summary: Update animal configuration
      tags:
      - Animals
  /knowledge_article:
    delete:
      parameters:
      - explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "204":
          description: Deleted
      security:
      - bearerAuth: []
      summary: Delete knowledge article
      tags:
      - Knowledge
    get:
      parameters:
      - explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                id: ka_123
                title: Porcupine Diet
                body: "Porcupines are herbivores that enjoy leaves, herbs, twigs,\
                  \ and bark."
                tags:
                - diet
                - porcupine
                visibility: public
                animalid: animal_1
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/KnowledgeArticle"
          description: Article
        "404":
          $ref: "#/components/responses/NotFound"
      summary: Get article by id
      tags:
      - Knowledge
    post:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/KnowledgeCreate"
        required: true
      responses:
        "201":
          content:
            application/json:
              example:
                id: ka_123
                title: Porcupine Diet
                body: "Porcupines are herbivores that enjoy leaves, herbs, twigs,\
                  \ and bark."
                tags:
                - diet
                - porcupine
                visibility: public
                animalid: animal_1
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/KnowledgeArticle"
          description: Created
      security:
      - bearerAuth: []
      summary: Create knowledge article
      tags:
      - Knowledge
  /upload_media:
    post:
      requestBody:
        content:
          multipart/form-data:
            schema:
              $ref: "#/components/schemas/_upload_media_post_request"
        required: true
      responses:
        "201":
          content:
            application/json:
              example:
                id: m_001
                title: Pokey portrait
                url: https://cdn.example.com/m_001.jpg
                kind: image
                animalid: animal_1
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/Media"
          description: Media created
      security:
      - bearerAuth: []
      summary: Upload media (image/audio/video) (backlog)
      tags:
      - Media
      - Later
      x-phase: later
  /media:
    delete:
      parameters:
      - explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "204":
          description: Deleted
      security:
      - bearerAuth: []
      summary: Delete media by id (backlog)
      tags:
      - Media
      - Later
      x-phase: later
    get:
      parameters:
      - explode: true
        in: query
        name: id
        required: true
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                id: m_001
                title: Pokey portrait
                url: https://cdn.example.com/m_001.jpg
                kind: image
                animalid: animal_1
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/Media"
          description: Media metadata
        "404":
          $ref: "#/components/responses/NotFound"
      summary: Fetch media by id (backlog)
      tags:
      - Media
      - Later
      x-phase: later
  /performance_metrics:
    get:
      parameters:
      - description: ISO8601 start (inclusive)
        explode: true
        in: query
        name: start
        required: true
        schema:
          format: date-time
          type: string
        style: form
      - description: ISO8601 end (exclusive)
        explode: true
        in: query
        name: end
        required: true
        schema:
          format: date-time
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                window:
                  start: 2025-08-11T09:00:00Z
                  end: 2025-08-11T09:00:00Z
                totals:
                  requests: 1240
                  tokensPrompt: 221000
                  tokensCompletion: 78000
                  costUsd: 37.55
                perAnimal:
                - animalid: animal_1
                  requests: 800
                  avgLatencyMs: 380
                - animalid: animal_2
                  requests: 440
                  avgLatencyMs: 410
              schema:
                $ref: "#/components/schemas/PerformanceMetrics"
          description: Metrics payload
      security:
      - bearerAuth: []
      summary: Performance metrics between dates
      tags:
      - Analytics
  /logs:
    get:
      parameters:
      - explode: true
        in: query
        name: level
        required: false
        schema:
          enum:
          - debug
          - info
          - warn
          - error
          type: string
        style: form
      - explode: true
        in: query
        name: start
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - explode: true
        in: query
        name: end
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - explode: true
        in: query
        name: page
        required: false
        schema:
          default: 1
          minimum: 1
          type: integer
        style: form
      - explode: true
        in: query
        name: pageSize
        required: false
        schema:
          default: 200
          maximum: 1000
          minimum: 1
          type: integer
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                items:
                - ts: 2025-08-11T09:00:00Z
                  level: info
                  msg: startup complete
                  meta:
                    service: api
                - ts: 2025-08-11T09:00:00Z
                  level: error
                  msg: LLM timeout
                  meta:
                    service: ai
                    requestId: req_9
                page: 1
                pageSize: 200
                total: 2
              schema:
                $ref: "#/components/schemas/PagedLogs"
          description: Paged logs
      security:
      - bearerAuth: []
      summary: Application logs (paged/filtered)
      tags:
      - Analytics
  /billing:
    get:
      parameters:
      - description: "Billing period (e.g., 2025-08)"
        explode: true
        in: query
        name: period
        required: false
        schema:
          pattern: "^[0-9]{4}-[0-9]{2}$"
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              example:
                period: 2025-08
                totalUsd: 123.45
                byService:
                - service: OpenAI
                  usd: 77.3
                - service: Storage
                  usd: 12.1
              schema:
                $ref: "#/components/schemas/BillingSummary"
          description: Billing breakdown
      security:
      - bearerAuth: []
      summary: Billing summary
      tags:
      - Analytics
  /system_health:
    get:
      responses:
        "200":
          content:
            application/json:
              example:
                status: ok
                checks:
                - name: db
                  status: ok
                - name: ai
                  status: ok
              schema:
                $ref: "#/components/schemas/SystemHealth"
          description: Health details
      security:
      - bearerAuth: []
      summary: System/health check for status page
      tags:
      - System
  /feature_flags:
    get:
      responses:
        "200":
          content:
            application/json:
              example:
                flags:
                  betaAudio:
                    enabled: true
                    rollout: 0.2
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/FeatureFlagsDocument"
          description: All flags
      security:
      - bearerAuth: []
      summary: Get feature flags
      tags:
      - System
    patch:
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/FeatureFlagsUpdate"
        required: true
      responses:
        "200":
          content:
            application/json:
              example:
                flags:
                  betaAudio:
                    enabled: true
                    rollout: 0.2
                created:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                modified:
                  at: 2025-08-11T09:00:00Z
                  by:
                    id: user_1
                    email: system@cmz.org
                    displayName: System
                softDelete: false
              schema:
                $ref: "#/components/schemas/FeatureFlagsDocument"
          description: Updated flags
      security:
      - bearerAuth: []
      summary: Update feature flags
      tags:
      - System
components:
  responses:
    Unauthorized:
      content:
        application/json:
          examples:
            unauthorized:
              value:
                code: unauthorized
                message: Missing or invalid token
          schema:
            $ref: "#/components/schemas/Error"
      description: Unauthorized
    NotFound:
      content:
        application/json:
          examples:
            notFound:
              value:
                code: not_found
                message: Resource not found
          schema:
            $ref: "#/components/schemas/Error"
      description: Resource not found
  schemas:
    ActorRef:
      example:
        displayName: displayName
        id: id
        email: email
      properties:
        id:
          title: id
          type: string
        email:
          format: email
          title: email
          type: string
        displayName:
          title: displayName
          type: string
      title: ActorRef
      type: object
    AuditStamp:
      example:
        at: 2000-01-23T04:56:07.000+00:00
        by:
          displayName: displayName
          id: id
          email: email
      properties:
        at:
          format: date-time
          title: at
          type: string
        by:
          $ref: "#/components/schemas/ActorRef"
      title: AuditStamp
      type: object
    AuditFields:
      properties:
        created:
          $ref: "#/components/schemas/AuditStamp"
        modified:
          $ref: "#/components/schemas/AuditStamp"
        deleted:
          $ref: "#/components/schemas/AuditStamp"
        softDelete:
          default: false
          title: softDelete
          type: boolean
      title: AuditFields
      type: object
    Error:
      example:
        code: code
        details:
          key: ""
        message: message
      properties:
        code:
          title: code
          type: string
        message:
          title: message
          type: string
        details:
          additionalProperties: true
          title: details
          type: object
      required:
      - code
      - message
      title: Error
      type: object
    PublicHome:
      example:
        message: message
        status: ok
      properties:
        message:
          title: message
          type: string
        status:
          enum:
          - ok
          - maintenance
          title: status
          type: string
      title: PublicHome
      type: object
    AdminShell:
      example:
        widgets:
        - widgets
        - widgets
      properties:
        widgets:
          items:
            type: string
          title: widgets
          type: array
      title: AdminShell
      type: object
    MemberShell:
      example:
        alerts:
        - alerts
        - alerts
        preferences:
          key: ""
      properties:
        preferences:
          additionalProperties: true
          title: preferences
          type: object
        alerts:
          items:
            type: string
          title: alerts
          type: array
      title: MemberShell
      type: object
    AuthRequest:
      example:
        password: password
        username: username
        register: true
      properties:
        username:
          format: email
          title: username
          type: string
        password:
          minLength: 6
          title: password
          type: string
        register:
          description: "If true, create account if not found"
          title: register
          type: boolean
      required:
      - password
      - username
      title: AuthRequest
      type: object
    AuthResponse:
      example:
        expiresIn: 0
        user:
          role: visitor
          deleted:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          softDelete: false
          displayName: displayName
          created:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          modified:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          id: id
          email: email
        token: token
      properties:
        token:
          title: token
          type: string
        expiresIn:
          description: Seconds until expiry
          title: expiresIn
          type: integer
        user:
          $ref: "#/components/schemas/User"
      required:
      - expiresIn
      - token
      - user
      title: AuthResponse
      type: object
    PasswordResetRequest:
      example:
        email: email
      properties:
        email:
          format: email
          title: email
          type: string
      required:
      - email
      title: PasswordResetRequest
      type: object
    User:
      allOf:
      - properties:
          id:
            type: string
          email:
            format: email
            type: string
          displayName:
            type: string
          role:
            enum:
            - visitor
            - member
            - editor
            - admin
            type: string
        required:
        - email
        - id
        - role
        type: object
      - $ref: "#/components/schemas/AuditFields"
      example:
        role: visitor
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        softDelete: false
        displayName: displayName
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        id: id
        email: email
      title: User
    UserDetails:
      allOf:
      - $ref: "#/components/schemas/User"
      - properties:
          usage:
            $ref: "#/components/schemas/UsageSummary"
        type: object
      example:
        role: visitor
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        softDelete: false
        displayName: displayName
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        usage:
          totalSessions: 0
          lastActive: 2000-01-23T04:56:07.000+00:00
          totalTurns: 6
          userid: userid
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        id: id
        email: email
      title: UserDetails
    PagedUsers:
      example:
        total: 1
        pageSize: 6
        page: 0
        items:
        - role: visitor
          deleted:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          softDelete: false
          displayName: displayName
          created:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          modified:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          id: id
          email: email
        - role: visitor
          deleted:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          softDelete: false
          displayName: displayName
          created:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          modified:
            at: 2000-01-23T04:56:07.000+00:00
            by:
              displayName: displayName
              id: id
              email: email
          id: id
          email: email
      properties:
        items:
          items:
            $ref: "#/components/schemas/User"
          title: items
          type: array
        page:
          title: page
          type: integer
        pageSize:
          title: pageSize
          type: integer
        total:
          title: total
          type: integer
      title: PagedUsers
      type: object
    ConvoTurnRequest:
      example:
        metadata:
          key: ""
        contextSummary: contextSummary
        sessionId: sessionId
        message: message
        animalid: animalid
      properties:
        animalid:
          title: animalid
          type: string
        message:
          title: message
          type: string
        sessionId:
          title: sessionId
          type: string
        contextSummary:
          nullable: true
          title: contextSummary
          type: string
        metadata:
          additionalProperties: true
          title: metadata
          type: object
      required:
      - animalid
      - message
      title: ConvoTurnRequest
      type: object
    ConvoTurnResponse:
      example:
        turn:
          tokensCompletion: 6
          tokensPrompt: 0
          id: id
          latencyMs: 1
          timestamp: 2000-01-23T04:56:07.000+00:00
        reply: reply
      properties:
        reply:
          title: reply
          type: string
        turn:
          $ref: "#/components/schemas/ConvoTurnResponse_turn"
      required:
      - reply
      - turn
      title: ConvoTurnResponse
      type: object
    ConvoHistory:
      example:
        sessionId: sessionId
        animalid: animalid
        userid: userid
        turns:
        - role: user
          content: content
          timestamp: 2000-01-23T04:56:07.000+00:00
        - role: user
          content: content
          timestamp: 2000-01-23T04:56:07.000+00:00
      properties:
        sessionId:
          title: sessionId
          type: string
        animalid:
          title: animalid
          type: string
        userid:
          title: userid
          type: string
        turns:
          items:
            $ref: "#/components/schemas/ConvoHistory_turns_inner"
          title: turns
          type: array
      title: ConvoHistory
      type: object
    SummarizeRequest:
      example:
        maxChars: 0
        sessionId: sessionId
      properties:
        sessionId:
          title: sessionId
          type: string
        maxChars:
          default: 2000
          title: maxChars
          type: integer
      required:
      - sessionId
      title: SummarizeRequest
      type: object
    Summary:
      allOf:
      - properties:
          sessionId:
            type: string
          summary:
            type: string
        type: object
      - $ref: "#/components/schemas/AuditFields"
      example:
        summary: summary
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        softDelete: false
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        sessionId: sessionId
      title: Summary
    Animal:
      allOf:
      - properties:
          id:
            type: string
          name:
            type: string
          species:
            type: string
          status:
            enum:
            - active
            - hidden
            type: string
        required:
        - id
        - name
        - species
        type: object
      - $ref: "#/components/schemas/AuditFields"
      example:
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        species: species
        softDelete: false
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        name: name
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        id: id
        status: active
      title: Animal
    AnimalDetails:
      allOf:
      - $ref: "#/components/schemas/Animal"
      - properties:
          description:
            type: string
          habitat:
            type: string
          imageUrl:
            format: uri
            type: string
        type: object
      example:
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        habitat: habitat
        species: species
        softDelete: false
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        imageUrl: https://openapi-generator.tech
        name: name
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        description: description
        id: id
        status: active
      title: AnimalDetails
    AnimalConfig:
      allOf:
      - properties:
          voice:
            type: string
          personality:
            type: string
          aiModel:
            type: string
          temperature:
            default: 0.7
            maximum: 2
            minimum: 0
            type: number
          topP:
            default: 1
            maximum: 1
            minimum: 0
            type: number
          toolsEnabled:
            items:
              type: string
            type: array
          guardrails:
            additionalProperties: true
            type: object
        type: object
      - $ref: "#/components/schemas/AuditFields"
      example:
        voice: voice
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        personality: personality
        softDelete: false
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        temperature: 0.1601656380922023
        toolsEnabled:
        - toolsEnabled
        - toolsEnabled
        guardrails:
          key: ""
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        aiModel: aiModel
        topP: 0.6027456183070403
      title: AnimalConfig
    AnimalConfigUpdate:
      allOf:
      - $ref: "#/components/schemas/AnimalConfig"
      example:
        voice: voice
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        personality: personality
        softDelete: false
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        temperature: 0.1601656380922023
        toolsEnabled:
        - toolsEnabled
        - toolsEnabled
        guardrails:
          key: ""
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        aiModel: aiModel
        topP: 0.6027456183070403
      title: AnimalConfigUpdate
    KnowledgeCreate:
      example:
        visibility: public
        title: title
        body: body
        animalid: animalid
        tags:
        - tags
        - tags
      properties:
        title:
          title: title
          type: string
        body:
          title: body
          type: string
        tags:
          items:
            type: string
          title: tags
          type: array
        visibility:
          enum:
          - public
          - staff
          - internal
          title: visibility
          type: string
        animalid:
          nullable: true
          title: animalid
          type: string
      required:
      - body
      - title
      - visibility
      title: KnowledgeCreate
      type: object
    KnowledgeArticle:
      allOf:
      - $ref: "#/components/schemas/KnowledgeCreate"
      - $ref: "#/components/schemas/AuditFields"
      - properties:
          id:
            type: string
        required:
        - id
        type: object
      example:
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        visibility: public
        softDelete: false
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        id: id
        title: title
        body: body
        animalid: animalid
        tags:
        - tags
        - tags
      title: KnowledgeArticle
    Media:
      allOf:
      - properties:
          id:
            type: string
          title:
            type: string
          url:
            format: uri
            type: string
          kind:
            enum:
            - image
            - audio
            - video
            type: string
          animalid:
            nullable: true
            type: string
        required:
        - id
        - kind
        - url
        type: object
      - $ref: "#/components/schemas/AuditFields"
      example:
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        softDelete: false
        kind: image
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        id: id
        title: title
        animalid: animalid
        url: https://openapi-generator.tech
      title: Media
    PerformanceMetrics:
      example:
        perAnimal:
        - avgLatencyMs: 2
          requests: 5
          animalid: animalid
        - avgLatencyMs: 2
          requests: 5
          animalid: animalid
        window:
          start: 2000-01-23T04:56:07.000+00:00
          end: 2000-01-23T04:56:07.000+00:00
        totals:
          costUsd: 5.962133916683182
          tokensCompletion: 1
          tokensPrompt: 6
          requests: 0
      properties:
        window:
          $ref: "#/components/schemas/PerformanceMetrics_window"
        totals:
          $ref: "#/components/schemas/PerformanceMetrics_totals"
        perAnimal:
          items:
            $ref: "#/components/schemas/PerformanceMetrics_perAnimal_inner"
          title: perAnimal
          type: array
      title: PerformanceMetrics
      type: object
    LogEntry:
      example:
        msg: msg
        level: level
        meta:
          key: ""
        ts: 2000-01-23T04:56:07.000+00:00
      properties:
        ts:
          format: date-time
          title: ts
          type: string
        level:
          title: level
          type: string
        msg:
          title: msg
          type: string
        meta:
          additionalProperties: true
          title: meta
          type: object
      title: LogEntry
      type: object
    PagedLogs:
      example:
        total: 1
        pageSize: 6
        page: 0
        items:
        - msg: msg
          level: level
          meta:
            key: ""
          ts: 2000-01-23T04:56:07.000+00:00
        - msg: msg
          level: level
          meta:
            key: ""
          ts: 2000-01-23T04:56:07.000+00:00
      properties:
        items:
          items:
            $ref: "#/components/schemas/LogEntry"
          title: items
          type: array
        page:
          title: page
          type: integer
        pageSize:
          title: pageSize
          type: integer
        total:
          title: total
          type: integer
      title: PagedLogs
      type: object
    BillingSummary:
      example:
        period: period
        byService:
        - service: service
          usd: 6.027456183070403
        - service: service
          usd: 6.027456183070403
        totalUsd: 0.8008281904610115
      properties:
        period:
          title: period
          type: string
        totalUsd:
          title: totalUsd
          type: number
        byService:
          items:
            $ref: "#/components/schemas/BillingSummary_byService_inner"
          title: byService
          type: array
      title: BillingSummary
      type: object
    UsageSummary:
      example:
        totalSessions: 0
        lastActive: 2000-01-23T04:56:07.000+00:00
        totalTurns: 6
        userid: userid
      properties:
        userid:
          title: userid
          type: string
        totalSessions:
          title: totalSessions
          type: integer
        totalTurns:
          title: totalTurns
          type: integer
        lastActive:
          format: date-time
          title: lastActive
          type: string
      title: UsageSummary
      type: object
    SystemHealth:
      example:
        checks:
        - name: name
          detail: detail
          status: ok
        - name: name
          detail: detail
          status: ok
        status: ok
      properties:
        status:
          enum:
          - ok
          - degraded
          - down
          title: status
          type: string
        checks:
          items:
            $ref: "#/components/schemas/SystemHealth_checks_inner"
          title: checks
          type: array
      title: SystemHealth
      type: object
    FeatureFlags:
      additionalProperties:
        $ref: "#/components/schemas/FeatureFlags_value"
      title: flags
      type: object
    FeatureFlagsDocument:
      allOf:
      - properties:
          flags:
            $ref: "#/components/schemas/FeatureFlags"
        type: object
      - $ref: "#/components/schemas/AuditFields"
      example:
        deleted:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        softDelete: false
        created:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
        flags: null
        modified:
          at: 2000-01-23T04:56:07.000+00:00
          by:
            displayName: displayName
            id: id
            email: email
      title: FeatureFlagsDocument
    FeatureFlagsUpdate:
      example:
        flags:
          key:
            rollout: 0.08008281904610115
            enabled: true
      properties:
        flags:
          additionalProperties:
            $ref: "#/components/schemas/FeatureFlags_value"
          title: flags
          type: object
      title: FeatureFlagsUpdate
      type: object
    _userrole_patch_request:
      properties:
        userId:
          title: userId
          type: string
        role:
          enum:
          - visitor
          - member
          - editor
          - admin
          title: role
          type: string
      required:
      - role
      - userId
      title: _userrole_patch_request
      type: object
    _upload_media_post_request:
      properties:
        file:
          format: binary
          type: string
        title:
          type: string
        animalid:
          type: string
      required:
      - file
      type: object
    ConvoTurnResponse_turn:
      example:
        tokensCompletion: 6
        tokensPrompt: 0
        id: id
        latencyMs: 1
        timestamp: 2000-01-23T04:56:07.000+00:00
      properties:
        id:
          title: id
          type: string
        timestamp:
          format: date-time
          title: timestamp
          type: string
        tokensPrompt:
          title: tokensPrompt
          type: integer
        tokensCompletion:
          title: tokensCompletion
          type: integer
        latencyMs:
          title: latencyMs
          type: integer
      title: ConvoTurnResponse_turn
      type: object
    ConvoHistory_turns_inner:
      example:
        role: user
        content: content
        timestamp: 2000-01-23T04:56:07.000+00:00
      properties:
        role:
          enum:
          - user
          - assistant
          - system
          title: role
          type: string
        content:
          title: content
          type: string
        timestamp:
          format: date-time
          title: timestamp
          type: string
      title: ConvoHistory_turns_inner
      type: object
    PerformanceMetrics_window:
      example:
        start: 2000-01-23T04:56:07.000+00:00
        end: 2000-01-23T04:56:07.000+00:00
      properties:
        start:
          format: date-time
          title: start
          type: string
        end:
          format: date-time
          title: end
          type: string
      title: PerformanceMetrics_window
      type: object
    PerformanceMetrics_totals:
      example:
        costUsd: 5.962133916683182
        tokensCompletion: 1
        tokensPrompt: 6
        requests: 0
      properties:
        requests:
          title: requests
          type: integer
        tokensPrompt:
          title: tokensPrompt
          type: integer
        tokensCompletion:
          title: tokensCompletion
          type: integer
        costUsd:
          title: costUsd
          type: number
      title: PerformanceMetrics_totals
      type: object
    PerformanceMetrics_perAnimal_inner:
      example:
        avgLatencyMs: 2
        requests: 5
        animalid: animalid
      properties:
        animalid:
          title: animalid
          type: string
        requests:
          title: requests
          type: integer
        avgLatencyMs:
          title: avgLatencyMs
          type: integer
      title: PerformanceMetrics_perAnimal_inner
      type: object
    BillingSummary_byService_inner:
      example:
        service: service
        usd: 6.027456183070403
      properties:
        service:
          title: service
          type: string
        usd:
          title: usd
          type: number
      title: BillingSummary_byService_inner
      type: object
    SystemHealth_checks_inner:
      example:
        name: name
        detail: detail
        status: ok
      properties:
        name:
          title: name
          type: string
        status:
          enum:
          - ok
          - warn
          - fail
          title: status
          type: string
        detail:
          title: detail
          type: string
      title: SystemHealth_checks_inner
      type: object
    FeatureFlags_value:
      example:
        rollout: 0.08008281904610115
        enabled: true
      properties:
        enabled:
          title: enabled
          type: boolean
        rollout:
          maximum: 1
          minimum: 0
          title: rollout
          type: number
      title: FeatureFlags_value
      type: object
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      scheme: bearer
      type: http
